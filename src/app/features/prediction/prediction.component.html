<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div class="card shadow p-4" style="width: 100%;">
    <h3 class="text-primary text-center mb-4 fw-semibold">Prediction of Algae</h3>
    <form [formGroup]="predictionForm" (ngSubmit)="runPrediction()">

      <div class="grid-container">
        <!-- Primera columna dividida en 2 filas -->
        <div class="left-column">
          <div class="sitio-section mb-3">
            <label class="form-label fw-semibold">Site</label>
            <div class="btn-group btn-group-toggle d-flex flex-wrap" role="group">
              <button
                type="button"
                *ngFor="let site of sites"
                class="btn btn-outline-primary m-1"
                [class.active]="predictionForm.get('site')?.value === site.name"
                (click)="predictionForm.get('site')?.setValue(site.name)"
              >
                {{ site.name }}
              </button>
            </div>
            <div *ngIf="isInvalid('sitio')" class="text-danger mt-1 small">Select a valid site.</div>
          </div>

          <div class="especie-section mb-3">
            <label class="form-label fw-semibold">Algae species</label><!-- style="max-height: 150px; overflow-y: auto;" -->
            <div class="btn-group btn-group-toggle d-flex flex-wrap" role="group">
              <button
                type="button"
                *ngFor="let algae of species"
                class="btn btn-outline-success m-1"
                [class.active]="predictionForm.get('specie')?.value === algae.name"
                (click)="predictionForm.get('specie')?.setValue(algae.name)"
              >
                {{ algae.name }}
              </button>
            </div>
            <div *ngIf="isInvalid('especie')" class="text-danger mt-1 small">Select a valid species.</div>
          </div>
        </div>

        <!-- Segunda columna con inputs -->
        <div class="right-column">
          <div class="mb-3">
            <label for="temperature" class="form-label fw-semibold">Temperature (°C)</label>
            <input
              type="number"
              class="form-control"
              id="temperature"
              formControlName="temperature"
              [ngClass]="{ 'is-invalid': isInvalid('temperature') }"
              min="0" max="50"
            />
            <div class="invalid-feedback">Temperature must be between 0 and 50 °C.</div>
          </div>

          <div class="mb-3">
            <label for="din" class="form-label fw-semibold">DIN (µmol/L)</label>
            <input
              type="number"
              class="form-control"
              id="din"
              formControlName="din"
              [ngClass]="{ 'is-invalid': isInvalid('din') }"
              min="0"
            />
            <div class="invalid-feedback">DIN must be a positive number.</div>
          </div>

          <div class="mb-3">
            <label for="nt" class="form-label fw-semibold">NT (µmol/L)</label>
            <input
              type="number"
              class="form-control"
              id="nt"
              formControlName="nt"
              [ngClass]="{ 'is-invalid': isInvalid('nt') }"
              min="0"
            />
            <div class="invalid-feedback">NT must be a positive number.</div>
          </div>

          <div class="mb-3">
            <label for="days" class="form-label fw-semibold">Predicted algae growth after X days.</label>
            <input
              type="number"
              class="form-control"
              id="days"
              formControlName="days"
              [ngClass]="{ 'is-invalid': isInvalid('days') }"
              min="1"
            />
            <div class="invalid-feedback">Enter a valid number of days (minimum 1).</div>
          </div>

          <button type="submit" class="btn btn-primary w-100 fw-semibold">Predict</button>
        </div>
      </div>

      <div *ngIf="result" class="alert alert-info mt-4 text-center fw-semibold">
        {{ result }}
      </div>
    </form>
  </div>
</div>
